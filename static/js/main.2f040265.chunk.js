(this["webpackJsonpexpense-tracker-app"]=this["webpackJsonpexpense-tracker-app"]||[]).push([[0],{31:function(e,t,n){e.exports=n(48)},36:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),o=n.n(c),u=n(20),l=n(1),s=(n(36),function(){return r.a.createElement("h2",null,"TRACK SPENDINGS")}),i=n(7),m=n.n(i),p=n(3),d=n(11),f=n(8),E=n(29),b=function(e,t){switch(t.type){case"SET_USER":return Object(p.a)(Object(p.a)({},e),{},{user:t.payload});case"GET_TRANSACTIONS":return Object(p.a)(Object(p.a)({},e),{},{transactions:t.payload,loading:!1});case"DELETE_TRANSACTION":return Object(p.a)(Object(p.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case"ADD_TRANSACTION":return Object(p.a)({transactions:[t.payload].concat(Object(E.a)(e.transactions))},e);case"FAILED":return Object(p.a)(Object(p.a)({},e),{},{error:t.payload});default:return e}},h=n(9),v=n.n(h),O=(n(38),n(40),v.a.initializeApp({apiKey:"AIzaSyAdJzQOOwzf7aJUdnv5lELqifzOXaFzO9E",authDomain:"react--expense-tracker.firebaseapp.com",databaseURL:"https://react--expense-tracker.firebaseio.com",projectId:"react--expense-tracker",storageBucket:"react--expense-tracker.appspot.com",messagingSenderId:"402368774884",appId:"1:402368774884:web:a9738caa7a58412b8122f1",measurementId:"G-C5018ZXQVB"})),g=v.a.auth,x=O.firestore(),j=new v.a.auth.GoogleAuthProvider,y=new v.a.auth.GithubAuthProvider,N={user:null,transactions:[],error:null,loading:!0},T=Object(a.createContext)(N),A=function(e){var t=e.children,n=Object(a.useReducer)(b,N),c=Object(f.a)(n,2),o=c[0],u=c[1];function l(){return(l=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("expenses").where("userId","==",o.user.uid).orderBy("timeStamp","desc").onSnapshot((function(e){return u({type:"GET_TRANSACTIONS",payload:e.docs.map((function(e){var t=e.data(),n=e.id;return Object(p.a)(Object(p.a)({},t),{},{id:n})}))})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.collection("expenses").doc(t).delete().then((function(){u({type:"DELETE_TRANSACTION",payload:t})})).catch((function(e){console.error("Error removing expense: ",e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(p.a)(Object(p.a)({},t),{},{userId:o.user.uid}),x.collection("expenses").add(n).then((function(e){u({type:"ADD_TRANSACTION",payload:n})})).catch((function(e){console.log("Error adding expense",e.message)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(T.Provider,{value:{user:o.user,transactions:o.transactions,setUser:function(e){u({type:"SET_USER",payload:e})},getTransactions:function(){return l.apply(this,arguments)},deleteTransaction:function(e){return s.apply(this,arguments)},addTransaction:function(e){return i.apply(this,arguments)},error:o.error,loading:o.loading}},t)};function w(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var C=function(){var e=Object(a.useContext)(T).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Your Balance"),r.a.createElement("h1",{className:"balance"},e<0?"-":"","\u20b9",w(Math.abs(e))))},S=function(){var e=Object(a.useContext)(T).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=(-1*e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return r.a.createElement("div",{className:"inc-exp-container"},r.a.createElement("div",null,r.a.createElement("h4",null,"Income"),r.a.createElement("p",{className:"money plus"},"+ \u20b9",w(t))),r.a.createElement("div",null,r.a.createElement("h4",null,"Expense"),r.a.createElement("p",{className:"money minus"},"- \u20b9",w(n))))},k=function(e){var t=e.transaction,n=Object(a.useContext)(T).deleteTransaction,c=t.amount<0?"-":"+";return r.a.createElement("li",{className:t.amount<0?"minus":"plus"},t.text," ",r.a.createElement("span",null,c," \u20b9",w(Math.abs(t.amount))),r.a.createElement("button",{onClick:function(){return confirm("Are you sure you want to delete this expense")?n(t.id):null},className:"delete-btn"},r.a.createElement("svg",{viewBox:"0 0 16 16",fill:"currentColor"},r.a.createElement("path",{fillRule:"evenodd",d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"}))))},I=function(){var e=Object(a.useContext)(T),t=e.transactions,n=e.getTransactions;return Object(a.useEffect)((function(){n()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"History"),r.a.createElement("ul",{className:"list"},t.map((function(e){return r.a.createElement(k,{key:e.id,transaction:e})}))))},_=function(){var e=Object(a.useState)(""),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(0),u=Object(f.a)(o,2),l=u[0],s=u[1],i=Object(a.useContext)(T).addTransaction;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Add new transaction"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={text:n,amount:+l,timeStamp:v.a.firestore.FieldValue.serverTimestamp()};i(t),c(""),s(0)}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"text"},"Text"),r.a.createElement("input",{type:"text",value:n,onChange:function(e){c(e.target.value)},placeholder:"Enter text..."})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("br",null),"(negative - expense, positive - income)"),r.a.createElement("input",{type:"number",value:l,onChange:function(e){return s(e.target.value)},placeholder:"Enter amount..."})),r.a.createElement("button",{className:"btn"},"Add transaction")))};var F=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s,null),r.a.createElement("div",{className:"container"},r.a.createElement(C,null),r.a.createElement(S,null),r.a.createElement(I,null),r.a.createElement(_,null)))};var R=function(e){var t=e.history,n=Object(a.useContext)(T).setUser,c=Object(a.useState)(!0),o=Object(f.a)(c,2),u=o[0],l=o[1],s=function(){var e=Object(d.a)(m.a.mark((function e(a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="GOOGLE"===a?j:y,e.next=3,g().signInWithPopup(r).then((function(e){n(e.user),t.push("/")})).catch((function(e){alert(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=g().onAuthStateChanged((function(a){a&&(n(a),t.push("/")),l(!1),e()}))}),[]),u?r.a.createElement(r.a.Fragment,null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"login__heading"},"Expense Tracker"),r.a.createElement("div",{className:"login"},r.a.createElement("button",{className:"login__button",onClick:function(){return s("GOOGLE")}},"Login"),r.a.createElement("div",{className:"login__github"},"Login with\xa0",r.a.createElement("button",{className:"login__github-button",onClick:function(){return s("GITHUB")}},r.a.createElement("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}))))))},G=n(30),z=function(e){var t=e.component,n=Object(G.a)(e,["component"]),c=Object(a.useContext)(T).user;return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/login"})}}))};var D=function(){return r.a.createElement(A,null,r.a.createElement(u.a,{basename:"/expense-tracker-react"},r.a.createElement(z,{exact:!0,path:"/",component:F}),r.a.createElement(l.b,{exact:!0,path:"/login",component:R})))};o.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.2f040265.chunk.js.map